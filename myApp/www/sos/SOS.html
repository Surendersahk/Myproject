<!DOCTYPE html>
<html>
<head>
  <title>Shake Detection</title>
</head>
<body>

<script>
  let shakeCount = 0;
  const shakeThreshold = 15; // acceleration threshold, tweak as needed
  const shakeTimeout = 1000; // max time (ms) between shakes for counting

  let lastShakeTime = 0;

  window.addEventListener('devicemotion', function(event) {
      const acceleration = event.accelerationIncludingGravity;
      if (!acceleration) return;

      // Calculate total acceleration
      const totalAcc = Math.sqrt(
        acceleration.x * acceleration.x +
        acceleration.y * acceleration.y +
        acceleration.z * acceleration.z
      );

      if (totalAcc > shakeThreshold) {
          const currentTime = new Date().getTime();

          if (currentTime - lastShakeTime < shakeTimeout) {
              shakeCount++;
          } else {
              shakeCount = 1; // reset count if last shake was too long ago
          }

          lastShakeTime = currentTime;

          if (shakeCount === 3) {
              alert('SOS triggered! Opening alert page.');
              // Open alert HTML or trigger your alert logic here
              window.location.href = 'alert.html'; // example to open alert.html
              shakeCount = 0; // reset after triggering
          }
      }
  });
</script>

</body>
</html>
